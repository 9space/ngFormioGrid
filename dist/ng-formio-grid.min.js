!function e(i,n,t){function o(a,s){if(!n[a]){if(!i[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(r)return r(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[a]={exports:{}};i[a][0].call(c.exports,function(e){var n=i[a][1][e];return o(n?n:e)},c,c.exports,e,i,n,t)}return n[a].exports}for(var r="function"==typeof require&&require,a=0;a<t.length;a++)o(t[a]);return o}({1:[function(e,i,n){"use strict";angular.module("ngFormioGrid",["formio","ngSanitize","ui.grid","ui.grid.pagination","ui.grid.resizeColumns","ui.grid.autoResize","angular-bind-html-compile"]).directive("formioGrid",function(){return{restrict:"E",replace:!0,scope:{src:"=",query:"=?",columns:"=?",buttons:"=?",gridOptions:"=?"},template:'<div><div ui-grid="gridOptionsDef" ui-grid-pagination ui-grid-auto-resize ui-grid-resize-columns ui-grid-move-columns class="grid"></div></div>',controller:["$scope","$timeout","Formio","formioComponents","FormioUtils","uiGridConstants",function(e,i,n,t,o,r){var a=null,s=angular.merge({pageNumber:1,pageSize:25,sort:null},e.gridOptionsDef);e.buttons=e.buttons||[{id:"view",key:"view",event:"rowView",label:"",width:35,icon:"glyphicon glyphicon-share-alt"}],e.buttonClick=function(i,n){e.$emit(i,n)},angular.isUndefined(e.query)&&(e.query={});var u=function(){a&&e.gridOptionsDef.columnDefs.length&&(s.pageSize&&(e.query.limit=s.pageSize),s.pageNumber&&(e.query.skip=(s.pageNumber-1)*s.pageSize),e.query.sort=s.sort,a.loadSubmissions({params:e.query}).then(function(i){e.gridOptionsDef.totalItems=i.serverCount,e.gridOptionsDef.data=i,l(i.length)}))},l=function(n){return i(function(){var i=30*e.gridApi.grid.getVisibleRowCount()+60;angular.element(document.getElementsByClassName("grid")[0]).css("height",i+"px")},10),n};e.gridOptionsDef=angular.merge({paginationPageSizes:[25,50,75],paginationPageSize:s.pageSize,useExternalPagination:!0,useExternalSorting:!0,columnDefs:[],data:[],onRegisterApi:function(i){e.gridApi=i,i.pagination.on.paginationChanged(e,function(e,i){s.pageNumber=e,s.pageSize=i,u()}),i.core.on.sortChanged(e,function(e,i){if(0===i.length)s.sort=null;else switch(i[0].sort.direction){case r.ASC:s.sort=i[0].colDef.field;break;case r.DESC:s.sort="-"+i[0].colDef.field;break;case void 0:s.sort=null}u()})}},e.gridOptions);var c=function(){e.src&&(a=new n(e.src),a.loadForm().then(function(i){var n={},t=1;e.gridOptionsDef.columnDefs=e.gridOptions&&e.gridOptions.columnDefs?angular.copy(e.gridOptions.columnDefs):[],e.buttons.forEach(function(i){var t=i["class"]||"btn btn-sm btn-default";n[i.label]=!0,e.gridOptionsDef.columnDefs.unshift({name:i.label,field:i.key,width:i.width,cellTemplate:'<a class="'+t+'" ng-click="grid.appScope.buttonClick(\''+i.event+'\', row.entity)"><span class="'+i.icon+'" aria-hidden="true"></span>'+i.label+"</a>"})});var r=function(i){for(var o=i.label||i.key;n.hasOwnProperty(o);)o=i.label+t++;n[o]=!0,e.gridOptionsDef.columnDefs.push({component:i,name:o,field:"data."+i.key,cellTemplate:'<div class="ui-grid-cell-contents" bind-html-compile="COL_FIELD | tableFieldView:this.col.colDef.component"></div>'})};if(e.columns&&e.columns.length>0){var a=o.flattenComponents(i.components);e.columns.forEach(function(e){a.hasOwnProperty(e)&&r(a[e])})}else o.eachComponent(i.components,function(e){e.input&&e.tableView&&e.key&&r(e)});u()}))};e.$on("reloadGrid",function(i,n,t){n&&(e.src=n),t&&(e.query=t),c()}),c()}]}})},{}]},{},[1]);