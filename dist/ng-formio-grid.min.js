!function e(i,n,t){function o(a,u){if(!n[a]){if(!i[a]){var l="function"==typeof require&&require;if(!u&&l)return l(a,!0);if(r)return r(a,!0);var s=new Error("Cannot find module '"+a+"'");throw s.code="MODULE_NOT_FOUND",s}var c=n[a]={exports:{}};i[a][0].call(c.exports,function(e){var n=i[a][1][e];return o(n?n:e)},c,c.exports,e,i,n,t)}return n[a].exports}for(var r="function"==typeof require&&require,a=0;a<t.length;a++)o(t[a]);return o}({1:[function(e,i,n){"use strict";angular.module("ngFormioGrid",["formio","ngSanitize","ui.grid","ui.grid.pagination","angular-bind-html-compile"]).filter("formioTableView",["Formio","formioComponents","$interpolate",function(e,i,n){return function(e,t){var o=i.components[t.type];if(!o.tableView)return e;if(t.multiple&&e.length>0){var r=[];return angular.forEach(e,function(e){r.push(o.tableView(e,t,n))}),r}return o.tableView(e,t,n)}}]).directive("formioGrid",function(){return{restrict:"E",replace:!0,scope:{src:"=",query:"=?",columns:"=?",buttons:"=?"},template:'<div><div ui-grid="gridOptions" ui-grid-pagination class="grid"></div></div>',controller:["Formio","formioComponents","FormioUtils","$scope","uiGridConstants",function(e,i,n,t,o){var r=null,a={pageNumber:1,pageSize:25,sort:null};t.buttons=t.buttons||[{id:"view",key:"view",event:"rowView",label:"",width:35,icon:"glyphicon glyphicon-share-alt"}],angular.isUndefined(t.query)&&(t.query={});var u=function(){r&&(a.pageSize&&(t.query.limit=a.pageSize),a.pageNumber&&(t.query.skip=(a.pageNumber-1)*a.pageSize),t.query.sort=a.sort,r.loadSubmissions({params:t.query}).then(function(e){t.gridOptions.totalItems=e.serverCount,t.gridOptions.data=e}))};t.gridOptions={paginationPageSizes:[25,50,75],paginationPageSize:a.pageSize,useExternalPagination:!0,useExternalSorting:!0,columnDefs:[],data:[],onRegisterApi:function(e){t.gridApi=e,e.pagination.on.paginationChanged(t,function(e,i){a.pageNumber=e,a.pageSize=i,u()}),e.core.on.sortChanged(t,function(e,i){if(0===i.length)a.sort=null;else switch(i[0].sort.direction){case o.ASC:a.sort=i[0].colDef.field;break;case o.DESC:a.sort="-"+i[0].colDef.field;break;case void 0:a.sort=null}u()})}},t.buttonClick=function(e,i){t.$emit(e,i)};var l=function(){t.src&&(r=new e(t.src),r.loadForm().then(function(e){t.gridOptions.columnDefs=[],t.buttons.forEach(function(e){var i=e["class"]||"btn btn-sm btn-default";t.gridOptions.columnDefs.push({name:e.id,field:e.key,width:e.width,cellTemplate:'<a class="'+i+'" ng-click="grid.appScope.buttonClick(\''+e.event+'\', row.entity)"><span class="'+e.icon+'" aria-hidden="true"></span>'+e.label+"</a>"})}),n.eachComponent(e.components,function(e){(t.columns&&-1!==t.columns.indexOf(e.key)||!t.columns&&e.input&&e.tableView)&&t.gridOptions.columnDefs.push({component:e,name:e.label,field:"data."+e.key,cellTemplate:'<div class="ui-grid-cell-contents" bind-html-compile="COL_FIELD | formioTableView:this.col.colDef.component"></div>'})})}),u())};t.$on("reloadGrid",function(e,i,n){t.src=i,t.query=n,l()}),l()}]}})},{}]},{},[1]);