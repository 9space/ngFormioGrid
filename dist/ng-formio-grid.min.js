!function e(i,n,o){function t(a,l){if(!n[a]){if(!i[a]){var s="function"==typeof require&&require;if(!l&&s)return s(a,!0);if(r)return r(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[a]={exports:{}};i[a][0].call(c.exports,function(e){var n=i[a][1][e];return t(n?n:e)},c,c.exports,e,i,n,o)}return n[a].exports}for(var r="function"==typeof require&&require,a=0;a<o.length;a++)t(o[a]);return t}({1:[function(e,i,n){"use strict";angular.module("ngFormioGrid",["formio","ngSanitize","ui.grid","ui.grid.pagination","ui.grid.resizeColumns","ui.grid.autoResize","angular-bind-html-compile"]).directive("formioGrid",function(){return{restrict:"E",replace:!0,scope:{src:"=",query:"=?",columns:"=?",buttons:"=?",gridOptions:"=?"},template:'<div><div ui-grid="gridOptionsDef" ui-grid-pagination ui-grid-auto-resize ui-grid-resize-columns ui-grid-move-columns class="grid"></div></div>',controller:["$scope","$element","$timeout","Formio","formioComponents","FormioUtils","uiGridConstants",function(e,i,n,o,t,r,a){var l=null,s=angular.merge({pageNumber:1,pageSize:25,sort:null},e.gridOptionsDef);e.buttons=e.buttons||[{id:"view",key:"view",event:"rowView",label:"",width:35,icon:"glyphicon glyphicon-share-alt"}],e.buttonClick=function(i,n){e.$emit(i,n)},angular.isUndefined(e.query)&&(e.query={});var u=function(){l&&e.gridOptionsDef.columnDefs.length&&(s.pageSize&&(e.query.limit=s.pageSize),s.pageNumber&&(e.query.skip=(s.pageNumber-1)*s.pageSize),e.query.sort=s.sort,l.loadSubmissions({params:e.query}).then(function(i){e.gridOptionsDef.totalItems=i.serverCount,e.gridOptionsDef.data=i,c(i.length)}))},c=function(o){return console.log("before",i),n(function(){console.log("after",i);var n=30*e.gridApi.grid.getVisibleRowCount()+60;angular.element(i).children().css("height",n+"px")},10),o};e.gridOptionsDef=angular.merge({paginationPageSizes:[25,50,75],paginationPageSize:s.pageSize,useExternalPagination:!0,useExternalSorting:!0,columnDefs:[],data:[],onRegisterApi:function(i){e.gridApi=i,i.pagination.on.paginationChanged(e,function(e,i){s.pageNumber=e,s.pageSize=i,u()}),i.core.on.sortChanged(e,function(e,i){if(0===i.length)s.sort=null;else switch(i[0].sort.direction){case a.ASC:s.sort=i[0].colDef.field;break;case a.DESC:s.sort="-"+i[0].colDef.field;break;case void 0:s.sort=null}u()})}},e.gridOptions);var g=function(){e.src&&(l=new o(e.src),l.loadForm().then(function(i){var n={},o=1;e.gridOptionsDef.columnDefs=e.gridOptions&&e.gridOptions.columnDefs?angular.copy(e.gridOptions.columnDefs):[],e.buttons.forEach(function(i){var o=i["class"]||"btn btn-sm btn-default";n[i.label]=!0,e.gridOptionsDef.columnDefs.unshift({name:i.label,field:i.key,width:i.width,cellTemplate:'<a class="'+o+'" ng-click="grid.appScope.buttonClick(\''+i.event+'\', row.entity)"><span class="'+i.icon+'" aria-hidden="true"></span>'+i.label+"</a>"})});var t=function(i){for(var t=i.label||i.key;n.hasOwnProperty(t);)t=i.label+o++;n[t]=!0,e.gridOptionsDef.columnDefs.push({component:i,name:t,field:"data."+i.key,cellTemplate:'<div class="ui-grid-cell-contents" bind-html-compile="COL_FIELD | tableFieldView:this.col.colDef.component"></div>'})};if(e.columns&&e.columns.length>0){var a=r.flattenComponents(i.components);e.columns.forEach(function(e){a.hasOwnProperty(e)&&t(a[e])})}else r.eachComponent(i.components,function(e){e.input&&e.tableView&&e.key&&t(e)});u()}))};e.$on("reloadGrid",function(i,n,o){n&&(e.src=n),o&&(e.query=o),g()}),g()}]}})},{}]},{},[1]);