!function e(i,n,t){function o(a,l){if(!n[a]){if(!i[a]){var s="function"==typeof require&&require;if(!l&&s)return s(a,!0);if(r)return r(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[a]={exports:{}};i[a][0].call(c.exports,function(e){var n=i[a][1][e];return o(n?n:e)},c,c.exports,e,i,n,t)}return n[a].exports}for(var r="function"==typeof require&&require,a=0;a<t.length;a++)o(t[a]);return o}({1:[function(e,i,n){"use strict";angular.module("ngFormioGrid",["formio","ngSanitize","ui.grid","ui.grid.pagination","ui.grid.resizeColumns","angular-bind-html-compile"]).filter("tableFieldView",["Formio","formioComponents","$interpolate",function(e,i,n){return function(e,t){var o=i.components[t.type];if(!o.tableView)return e;if(t.multiple&&e.length>0){var r=[];return angular.forEach(e,function(e){r.push(o.tableView(e,t,n))}),r}return o.tableView(e,t,n)}}]).directive("formioGrid",function(){return{restrict:"E",replace:!0,scope:{src:"=",query:"=?",columns:"=?",buttons:"=?",gridOptions:"=?",formioGridDateBetween:"=?",exposeGridApi:"=?"},template:'<div><div ui-grid="gridOptions" ui-grid-pagination ui-grid-resize-columns ui-grid-move-columns class="grid" ui-grid-selection></div></div>',controller:["Formio","formioComponents","FormioUtils","$scope","$q","uiGridConstants",function(e,i,n,t,o,r){t.apiReady=o.defer();var a=null,l=angular.merge({pageNumber:1,pageSize:25,sort:null},t.gridOptions);t.buttons=t.buttons||[{id:"view",key:"view",event:"rowView",label:"",width:35,icon:"glyphicon glyphicon-share-alt"}],angular.isUndefined(t.query)&&(t.query={});var s=function(){return a&&t.gridOptions.columnDefs.length?(l.pageSize&&(t.query.limit=l.pageSize),l.pageNumber&&(t.query.skip=(l.pageNumber-1)*l.pageSize),t.query.sort=l.sort,a.loadSubmissions({params:t.query}).then(function(e){t.gridOptions.totalItems=e.serverCount,t.gridOptions.data=e}),t.apiReady.promise):void 0};t.gridOptions=angular.merge({paginationPageSizes:[25,50,75],paginationPageSize:l.pageSize,useExternalPagination:!0,useExternalSorting:!0,enableFiltering:!1,enableRowSelection:!1,enableSelectAll:!0,columnDefs:[],data:[],onRegisterApi:function(e){console.log(e),t.gridApi=e,t.apiReady.resolve(e),e.pagination.on.paginationChanged(t,function(e,i){l.pageNumber=e,l.pageSize=i,s()}),e.core.on.sortChanged(t,function(e,i){if(0===i.length)l.sort=null;else switch(i[0].sort.direction){case r.ASC:l.sort=i[0].colDef.field;break;case r.DESC:l.sort="-"+i[0].colDef.field;break;case void 0:l.sort=null}s()})}},t.gridOptions),t.formioGridDateBetween=function(e,i){return t.query={"data.date__gte":e,"data.date__lte":i},s(),t.apiReady.promise},t.exposeGridApi=function(){return t.apiReady.promise},t.$on("selectGridRow",function(e,i){return t.gridApi.selection.selectRow(i),t.apiReady.promise}),t.$on("refreshGrid",function(e){return s(),t.apiReady.promise}),t.buttonClick=function(e,i){t.$emit(e,i)};var u=function(){t.src&&(a=new e(t.src),a.loadForm().then(function(e){var i={},o=1;t.gridOptions.columnDefs=[],t.buttons.forEach(function(e){var n=e["class"]||"btn btn-sm btn-default";i[e.label]=!0,t.gridOptions.columnDefs.push({name:e.label,field:e.key,width:e.width,cellTemplate:'<a class="'+n+'" ng-click="grid.appScope.buttonClick(\''+e.event+'\', row.entity)"><span class="'+e.icon+'" aria-hidden="true"></span>'+e.label+"</a>"})});var r=function(e){for(var n=e.label||e.key;i.hasOwnProperty(n);)n=e.label+o++;i[n]=!0,t.gridOptions.columnDefs.push({component:e,name:n,field:"data."+e.key,cellTemplate:'<div class="ui-grid-cell-contents" ng-click="$emit(\'rowView\', row.entity)" bind-html-compile="COL_FIELD | tableFieldView:this.col.colDef.component"></div>'})};if(t.columns&&t.columns.length>0){var a=n.flattenComponents(e.components);t.columns.forEach(function(e){a.hasOwnProperty(e)&&r(a[e])})}else n.eachComponent(e.components,function(e){e.input&&e.tableView&&e.key&&r(e)});t.gridOptions.columnDefs.push({name:"operations",field:"data.edit",width:80,enableColumnMenu:!1,cellTemplate:'<div class="operations"><a class="btn btn-default btn-xs" ng-click="$emit(\'rowEdit\', row.entity)"><span class="glyphicon glyphicon-edit" aria-hidden="true"></span></a><a class="btn btn-danger btn-xs" ng-click="$emit(\'rowDelete\', row.entity)"><span class="glyphicon glyphicon-remove-circle" aria-hidden="true"></span></a></div>'}),s()}))};t.$on("reloadGrid",function(e,i,n){i&&(t.src=i),n&&(t.query=n),u()}),u()}]}})},{}]},{},[1]);