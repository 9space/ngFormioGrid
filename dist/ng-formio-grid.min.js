!function e(n,i,o){function t(a,s){if(!i[a]){if(!n[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(r)return r(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var c=i[a]={exports:{}};n[a][0].call(c.exports,function(e){var i=n[a][1][e];return t(i?i:e)},c,c.exports,e,n,i,o)}return i[a].exports}for(var r="function"==typeof require&&require,a=0;a<o.length;a++)t(o[a]);return t}({1:[function(e,n,i){"use strict";angular.module("ngFormioGrid",["formio","ngSanitize","ui.grid","ui.grid.pagination","ui.grid.resizeColumns","ui.grid.autoResize","angular-bind-html-compile"]).directive("formioGrid",function(){return{restrict:"E",replace:!0,scope:{src:"=",query:"=?",columns:"=?",buttons:"=?",gridOptions:"=?"},template:'<div><div ui-grid="gridOptionsDef" ui-grid-pagination ui-grid-auto-resize ui-grid-resize-columns ui-grid-move-columns class="grid"></div></div>',controller:["$scope","$element","$timeout","Formio","formioComponents","FormioUtils","uiGridConstants","$http",function(e,n,i,o,t,r,a,s){var l=null,u={pageNumber:1,pageSize:25,sort:null};e.query&&e.query.sort&&(u.sort=e.query.sort),e.gridOptionsDef=angular.merge({namespace:"row",dataRoot:"data.",endpoint:"",paginationPageSizes:[25,50,75],paginationPageSize:u.pageSize,enableHorizontalScrollbar:a.scrollbars.NEVER,enableVerticalScrollbar:a.scrollbars.NEVER,useExternalPagination:!0,useExternalSorting:!0,columnDefs:[],data:[],onRegisterApi:function(n){e.gridApi=n,n.pagination.on.paginationChanged(e,function(e,n){u.pageNumber=e,u.pageSize=n,c()}),n.core.on.sortChanged(e,function(e,n){if(0===n.length)u.sort=null;else switch(n[0].sort.direction){case a.ASC:u.sort=n[0].colDef.field;break;case a.DESC:u.sort="-"+n[0].colDef.field;break;case void 0:u.sort=null}c()})}},e.gridOptions),u.pageSize=e.gridOptionsDef.paginationPageSize,e.buttons=e.buttons||[{id:"view",key:"view",event:e.gridOptionsDef.namespace+"View",label:"",width:35,icon:"glyphicon glyphicon-share-alt"}],e.buttonClick=function(n,i){e.$emit(n,i)},angular.isUndefined(e.query)&&(e.query={});var c=function(){if(l&&e.gridOptionsDef.columnDefs.length)if(u.pageSize&&(e.query.limit=u.pageSize),u.pageNumber&&(e.query.skip=(u.pageNumber-1)*u.pageSize),e.query.sort=u.sort,e.gridOptionsDef.endpoint){var n=e.gridOptionsDef.endpoint,i=function(e){var n=[];for(var i in e)e.hasOwnProperty(i)&&n.push(encodeURIComponent(i)+"="+encodeURIComponent(e[i]));return n.join("&")};if(e.query){var t=i(e.query);t&&(n+="?"+t)}s.get(n,{headers:{"x-jwt-token":o.getToken()}}).then(function(n){e.gridOptionsDef.data=n.data,d(n.data.length)},function(e){console.log("Error: "+e.message)})}else l.loadSubmissions({params:e.query}).then(function(n){e.gridOptionsDef.totalItems=n.serverCount,e.gridOptionsDef.data=n,d(n.length)})},d=function(o){return i(function(){var i=30*e.gridApi.grid.getVisibleRowCount()+65;angular.element(n).children().css("height",i+"px")},10),o},p=function(){e.src&&(l=new o(e.src),l.loadForm().then(function(n){var i={},o=1;e.gridOptionsDef.columnDefs=e.gridOptions&&e.gridOptions.columnDefs?angular.copy(e.gridOptions.columnDefs):[],e.buttons.forEach(function(n){var o=n["class"]||"btn btn-sm btn-default";i[n.label]=!0,e.gridOptionsDef.columnDefs.unshift({name:n.label,field:n.key,width:n.width,cellTemplate:'<a class="'+o+'" ng-click="grid.appScope.buttonClick(\''+n.event+'\', row.entity)"><span class="'+n.icon+'" aria-hidden="true"></span>'+n.label+"</a>"})});var t=function(n,t){var r;for(r=t&&t.label?t.label:n.label||n.key;i.hasOwnProperty(r);)r=n.label+o++;i[r]=!0,e.gridOptionsDef.columnDefs.push({component:n,name:r,field:e.gridOptionsDef.dataRoot+n.key,cellTemplate:'<div class="ui-grid-cell-contents" bind-html-compile="COL_FIELD | tableFieldView:this.col.colDef.component"></div>'})};if(e.columns&&e.columns.length>0){var a,s=r.flattenComponents(n.components);e.columns.forEach(function(e){"object"==typeof e?(a=e,e=a.key):a=!1,s.hasOwnProperty(e)&&t(s[e],a)})}else r.eachComponent(n.components,function(e){e.input&&e.tableView&&e.key&&t(e)});c()}))};e.$on("reloadGrid",function(n,i,o){i&&(e.src=i),o&&(e.query=o),p()}),p()}]}})},{}]},{},[1]);