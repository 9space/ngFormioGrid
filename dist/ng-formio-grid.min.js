!function i(e,n,t){function o(a,l){if(!n[a]){if(!e[a]){var s="function"==typeof require&&require;if(!l&&s)return s(a,!0);if(r)return r(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[a]={exports:{}};e[a][0].call(c.exports,function(i){var n=e[a][1][i];return o(n?n:i)},c,c.exports,i,e,n,t)}return n[a].exports}for(var r="function"==typeof require&&require,a=0;a<t.length;a++)o(t[a]);return o}({1:[function(i,e,n){"use strict";angular.module("ngFormioGrid",["formio","ngSanitize","ui.grid","ui.grid.pagination","angular-bind-html-compile"]).directive("formioGrid",function(){return{restrict:"E",replace:!0,scope:{src:"=",query:"=?",columns:"=?",buttons:"=?"},template:'<div><div ui-grid="gridOptions" ui-grid-pagination class="grid"></div></div>',controller:["Formio","formioComponents","FormioUtils","$scope","uiGridConstants",function(i,e,n,t,o){var r=null,a={pageNumber:1,pageSize:25,sort:null};t.buttons=t.buttons||[{id:"_id",key:"view",label:"",width:35,icon:"glyphicon glyphicon-share-alt"}],angular.isUndefined(t.query)&&(t.query={});var l=function(){r&&(a.pageSize&&(t.query.limit=a.pageSize),a.pageNumber&&(t.query.skip=(a.pageNumber-1)*a.pageSize),t.query.sort=a.sort,r.loadSubmissions({params:t.query}).then(function(i){t.gridOptions.totalItems=i.serverCount,t.gridOptions.data=i}))};t.gridOptions={paginationPageSizes:[25,50,75],paginationPageSize:a.pageSize,useExternalPagination:!0,useExternalSorting:!0,columnDefs:[],data:[],onRegisterApi:function(i){t.gridApi=i,i.pagination.on.paginationChanged(t,function(i,e){a.pageNumber=i,a.pageSize=e,l()}),i.core.on.sortChanged(t,function(i,e){if(0===e.length)a.sort=null;else switch(e[0].sort.direction){case o.ASC:a.sort=e[0].colDef.field;break;case o.DESC:a.sort="-"+e[0].colDef.field;break;case void 0:a.sort=null}l()})}},t.buttonClick=function(i,e){"view"===e&&t.$emit("rowView",i),t.$emit("buttonClick",i,e)};var s=function(){t.src&&(r=new i(t.src),r.loadForm().then(function(i){t.gridOptions.columnDefs=[],t.buttons.forEach(function(i){var e=i["class"]||"btn btn-sm btn-default";t.gridOptions.columnDefs.push({name:i.label,field:i.key,width:i.width,cellTemplate:'<a class="'+e+'" ng-click="grid.appScope.buttonClick(row.entity, \''+i.key+'\')"><span class="'+i.icon+'" aria-hidden="true"></span>'+i.label+"</a>"})}),n.eachComponent(i.components,function(i){(t.columns&&-1!==t.columns.indexOf(i.key)||!t.columns&&i.input&&i.tableView)&&t.gridOptions.columnDefs.push({component:i,name:i.label,field:"data."+i.key,cellTemplate:'<div class="ui-grid-cell-contents" bind-html-compile="COL_FIELD | tableFieldView:this.col.colDef.component"></div>'})})}),l())};t.$on("reloadGrid",function(i,e,n){t.src=e,t.query=n,s()}),s()}]}})},{}]},{},[1]);