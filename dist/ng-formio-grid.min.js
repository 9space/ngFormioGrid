!function e(i,n,t){function o(a,l){if(!n[a]){if(!i[a]){var s="function"==typeof require&&require;if(!l&&s)return s(a,!0);if(r)return r(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[a]={exports:{}};i[a][0].call(c.exports,function(e){var n=i[a][1][e];return o(n?n:e)},c,c.exports,e,i,n,t)}return n[a].exports}for(var r="function"==typeof require&&require,a=0;a<t.length;a++)o(t[a]);return o}({1:[function(e,i,n){"use strict";angular.module("ngFormioGrid",["formio","ngSanitize","ui.grid","ui.grid.pagination","angular-bind-html-compile"]).directive("formioGrid",function(){return{restrict:"E",replace:!0,scope:{src:"=",query:"=?",columns:"=?",buttons:"=?"},template:'<div><div ui-grid="gridOptions" ui-grid-pagination class="grid"></div></div>',controller:["Formio","formioComponents","FormioUtils","$scope","uiGridConstants",function(e,i,n,t,o){var r=null,a={pageNumber:1,pageSize:25,sort:null};t.buttons=t.buttons||[{id:"view",key:"view",event:"rowView",label:"",width:35,icon:"glyphicon glyphicon-share-alt"}],angular.isUndefined(t.query)&&(t.query={});var l=function(){r&&t.gridOptions.columnDefs.length&&(a.pageSize&&(t.query.limit=a.pageSize),a.pageNumber&&(t.query.skip=(a.pageNumber-1)*a.pageSize),t.query.sort=a.sort,r.loadSubmissions({params:t.query}).then(function(e){t.gridOptions.totalItems=e.serverCount,t.gridOptions.data=e}))};t.gridOptions={paginationPageSizes:[25,50,75],paginationPageSize:a.pageSize,useExternalPagination:!0,useExternalSorting:!0,columnDefs:[],data:[],onRegisterApi:function(e){t.gridApi=e,e.pagination.on.paginationChanged(t,function(e,i){a.pageNumber=e,a.pageSize=i,l()}),e.core.on.sortChanged(t,function(e,i){if(0===i.length)a.sort=null;else switch(i[0].sort.direction){case o.ASC:a.sort=i[0].colDef.field;break;case o.DESC:a.sort="-"+i[0].colDef.field;break;case void 0:a.sort=null}l()})}},t.buttonClick=function(e,i){t.$emit(e,i)};var s=function(){t.src&&(r=new e(t.src),r.loadForm().then(function(e){var i={},o=1;t.gridOptions.columnDefs=[],t.buttons.forEach(function(e){var n=e["class"]||"btn btn-sm btn-default";i[e.label]=!0,t.gridOptions.columnDefs.push({name:e.id,field:e.key,width:e.width,cellTemplate:'<a class="'+n+'" ng-click="grid.appScope.buttonClick(\''+e.event+'\', row.entity)"><span class="'+e.icon+'" aria-hidden="true"></span>'+e.label+"</a>"})}),n.eachComponent(e.components,function(e){if(e.input&&e.tableView&&e.key&&(!t.columns||t.columns.length&&-1!==t.columns.indexOf(e.key))){for(var n=e.label||e.key;i.hasOwnProperty(n);)n=e.label+o++;i[n]=!0,t.gridOptions.columnDefs.push({component:e,name:n,field:"data."+e.key,cellTemplate:'<div class="ui-grid-cell-contents" bind-html-compile="COL_FIELD | tableFieldView:this.col.colDef.component"></div>'})}}),l()}))};t.$on("reloadGrid",function(e,i,n){i&&(t.src=i),n&&(t.query=n),s()}),s()}]}})},{}]},{},[1]);