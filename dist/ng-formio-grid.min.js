!function e(n,i,o){function t(a,s){if(!i[a]){if(!n[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(r)return r(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=i[a]={exports:{}};n[a][0].call(c.exports,function(e){var i=n[a][1][e];return t(i?i:e)},c,c.exports,e,n,i,o)}return i[a].exports}for(var r="function"==typeof require&&require,a=0;a<o.length;a++)t(o[a]);return t}({1:[function(e,n,i){"use strict";angular.module("ngFormioGrid",["formio","ngSanitize","ui.grid","ui.grid.pagination","ui.grid.resizeColumns","ui.grid.autoResize","angular-bind-html-compile"]).directive("formioGrid",function(){return{restrict:"E",replace:!0,scope:{src:"=",query:"=?",columns:"=?",buttons:"=?",gridOptions:"=?"},template:'<div><div ui-grid="gridOptions" ui-grid-pagination ui-grid-auto-resize ui-grid-resize-columns ui-grid-move-columns class="grid"></div></div>',controller:["$scope","$element","$timeout","Formio","formioComponents","FormioUtils","uiGridConstants","$http",function(e,n,i,o,t,r,a,s){var u=null;e.gridOptions=e.gridOptions||{};var l={pageNumber:1,pageSize:25,sort:null};e.gridOptions=angular.merge({namespace:"row",dataRoot:"data.",endpoint:"",paginationPageSizes:[25,50,75],paginationPageSize:l.pageSize,useExternalPagination:!0,useExternalSorting:!0,columnDefs:[],data:[],onRegisterApi:function(n){e.gridApi=n,n.pagination.on.paginationChanged(e,function(e,n){l.pageNumber=e,l.pageSize=n,c()}),n.core.on.sortChanged(e,function(e,n){if(0===n.length)l.sort=null;else switch(n[0].sort.direction){case a.ASC:l.sort=n[0].colDef.field;break;case a.DESC:l.sort="-"+n[0].colDef.field;break;case void 0:l.sort=null}c()})}},e.gridOptions),l.pageSize=e.gridOptions.paginationPageSize,e.buttons=e.buttons||[{id:"view",key:"view",event:e.gridOptions.namespace+"View",label:"",width:35,icon:"glyphicon glyphicon-share-alt"}],e.buttonClick=function(n,i){e.$emit(n,i)},angular.isUndefined(e.query)&&(e.query={});var c=function(){if(u&&e.gridOptions.columnDefs.length)if(l.pageSize&&(e.query.limit=l.pageSize),l.pageNumber&&(e.query.skip=(l.pageNumber-1)*l.pageSize),e.query.sort=l.sort,e.gridOptions.endpoint){var n=e.gridOptions.endpoint,i=function(e){var n=[];for(var i in e)e.hasOwnProperty(i)&&n.push(encodeURIComponent(i)+"="+encodeURIComponent(e[i]));return n.join("&")};if(e.query){var t=i(e.query);t&&(n+="?"+t)}s.get(n,{headers:{"x-jwt-token":o.getToken()}}).then(function(n){e.gridOptions.data=n.data,d(n.data.length)},function(e){console.log("Error: "+e.message)})}else u.loadSubmissions({params:e.query}).then(function(n){e.gridOptions.totalItems=n.serverCount,e.gridOptions.data=n,d(n.length)})},d=function(o){return i(function(){var i=30*e.gridApi.grid.getVisibleRowCount()+60;angular.element(n).children().css("height",i+"px")},10),o},p=function(){e.src&&(u=new o(e.src),u.loadForm().then(function(n){var i={},o=1;e.gridOptions.columnDefs=e.gridOptions&&e.gridOptions.columnDefs?angular.copy(e.gridOptions.columnDefs):[],e.buttons.forEach(function(n){var o=n["class"]||"btn btn-sm btn-default";i[n.label]=!0,e.gridOptions.columnDefs.unshift({name:n.label,field:n.key,width:n.width,cellTemplate:'<a class="'+o+'" ng-click="grid.appScope.buttonClick(\''+n.event+'\', row.entity)"><span class="'+n.icon+'" aria-hidden="true"></span>'+n.label+"</a>"})});var t=function(n){for(var t=n.label||n.key;i.hasOwnProperty(t);)t=n.label+o++;i[t]=!0,e.gridOptions.columnDefs.push({component:n,name:t,field:e.gridOptions.dataRoot+n.key,cellTemplate:'<div class="ui-grid-cell-contents" bind-html-compile="COL_FIELD | tableFieldView:this.col.colDef.component"></div>'})};if(e.columns&&e.columns.length>0){var a=r.flattenComponents(n.components);e.columns.forEach(function(e){a.hasOwnProperty(e)&&t(a[e])})}else r.eachComponent(n.components,function(e){e.input&&e.tableView&&e.key&&t(e)});c()}))};e.$on("reloadGrid",function(n,i,o){i&&(e.src=i),o&&(e.query=o),p()}),p()}]}})},{}]},{},[1]);